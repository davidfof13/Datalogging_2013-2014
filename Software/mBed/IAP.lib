http://mbed.org/users/okano/code/IAP/#0f4b7abaf177
